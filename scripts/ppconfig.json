{"name":"test","url":"https://cloudstores.yifengyun.net/addons/yun_shop/?menu#/home?i=1","showName":"yifengyun","appid":"com.yifengyun.app","icon":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.1","preview":"desktop","platform":["2-2"],"width":800,"height":600,"desc":"","jsFile":[],"filterCss":"","customJs":"// PakePlus 构建信息\nconsole.log(\n    '%cbuild from PakePlus： https://github.com/Sjj1024/PakePlus',\n    'color:orangered;font-weight:bolder'\n)\n\n// --- 以下是您原来的代码，用于处理页面跳转 ---\n\n// 非常重要，不懂代码不要动，这里可以解决80%的问题，也可以生产1000+的bug\nconst hookClick = (e) => {\n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector(\n        'head base[target=\"_blank\"]'\n    )\n    console.log('origin', origin, isBaseTargetBlank)\n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        console.log('handle origin', origin)\n        location.href = origin.href\n    } else {\n        console.log('not handle origin', origin)\n    }\n}\n\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    location.href = url\n}\n\ndocument.addEventListener('click', hookClick, { capture: true })\n\n\n// --- 以下是新增的代码，用于为所有请求添加请求头 ---\n\n// 定义要添加的请求头\nconst customHeader = {\n    'X-Requested-With': 'com.yifengyun.tjp'\n};\n\n// 1. 拦截和重写 fetch API\nconst originalFetch = window.fetch;\nwindow.fetch = function (url, options) {\n    // 确保 options.headers 存在\n    options = options || {};\n    options.headers = options.headers || {};\n    \n    // 添加自定义请求头\n    Object.assign(options.headers, customHeader);\n    \n    console.log('Fetching with custom header:', url, options.headers);\n    \n    // 调用原始的 fetch 方法\n    return originalFetch.apply(this, arguments);\n};\n\n// 2. 拦截和重写 XMLHttpRequest\nconst originalOpen = XMLHttpRequest.prototype.open;\nconst originalSend = XMLHttpRequest.prototype.send;\n\nXMLHttpRequest.prototype.open = function(method, url, async, user, password) {\n    // 存储请求信息，以便在 send 时使用\n    this._url = url; \n    return originalOpen.apply(this, arguments);\n};\n\nXMLHttpRequest.prototype.send = function(data) {\n    const originalSetRequestHeader = this.setRequestHeader;\n    \n    // 重写 setRequestHeader 以便在最后添加我们的请求头\n    this.setRequestHeader = function(header, value) {\n        // 正常调用原始的 setRequestHeader\n        originalSetRequestHeader.apply(this, arguments);\n    };\n\n    // 添加我们自定义的请求头\n    for (const header in customHeader) {\n        this.setRequestHeader(header, customHeader[header]);\n    }\n    \n    console.log('XHR Sending with custom header:', this._url, customHeader);\n    \n    // 恢复原始的 setRequestHeader，避免影响后续操作\n    this.setRequestHeader = originalSetRequestHeader;\n\n    return originalSend.apply(this, arguments);\n};\n\nconsole.log('已成功注入自定义请求头脚本 (fetch & XMLHttpRequest)。');","isHtml":false,"htmlPath":"","htmlFiles":[],"more":{"windows":{"label":"","title":"yifengyun","url":"https://cloudstores.yifengyun.net/addons/yun_shop/?menu#/home?i=1","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36","width":800,"height":600,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"test","showName":"yifengyun","version":"0.0.1","webUrl":"https://cloudstores.yifengyun.net/addons/yun_shop/?menu#/home?i=1","id":"com.yifengyun.app.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":true},"android":{"name":"test","showName":"yifengyun","version":"0.0.1","webUrl":"https://cloudstores.yifengyun.net/addons/yun_shop/?menu#/home?i=1","id":"com.yifengyun.app.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":true},"desktop":{"name":"test","showName":"yifengyun","version":"0.0.1","id":"com.yifengyun.app.desktop","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","webUrl":"https://cloudstores.yifengyun.net/addons/yun_shop/?menu#/home?i=1","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"local","debug":true}}